<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (24) on Tue Nov 11 06:03:06 CST 2025 -->
<title>org.efs.activator (efs 0.2.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-11-11">
<meta name="description" content="declaration: package: org.efs.activator">
<meta name="generator" content="javadoc/PackageWriter">
<link rel="stylesheet" type="text/css" href="../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../resource-files/overview.css" title="Style">
<script type="text/javascript" src="../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../search.html">Search</a></li>
<li><a href="../../../help-doc.html#package">Help</a></li>
</ul>
<div class="about-language">efs<br>v. 0.2.0</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html" class="current-selection">org.efs.activator</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#example-workflows-heading" tabindex="0">Example Workflows</a></li>
<li><a href="#activator-execution-heading" tabindex="0">Activator Execution</a></li>
<li><a href="#monitor-efsactivator-heading" tabindex="0">Monitor EfsActivator</a></li>
</ol>
</li>
<li><a href="#related-package-summary" tabindex="0">Related Packages</a></li>
<li><a href="#class-summary" tabindex="0">Classes and Interfaces</a></li>
</ol>
</nav>
<main role="main">
<div class="header">
<h1 title="Package org.efs.activator" class="title">Package org.efs.activator</h1>
</div>
<hr>
<div class="horizontal-scroll">
<div class="package-signature">package <span class="element-name">org.efs.activator</span></div>
<section class="package-description" id="package-description">
<div class="block">Provides ability to transition efs agents between
 stopped, stand by, and active states according to user-defined
 workflow.
 An <a href="../dispatcher/IEfsAgent.html" title="interface in org.efs.dispatcher"><code>agent</code></a> is an object
 which reacts to asynchronous
 <a href="../event/IEfsEvent.html" title="interface in org.efs.event"><code>event</code></a>s. An agent's
 initialization consists of data member initialization and
 plugging into asynchronous event feeds. Object-oriented
 languages provide an class constructor for data member
 initialization. But this constructor should not be used for
 attaching to event feeds because it could lead to the agent
 being called back when it is only partially constructed.
 <p>
 A simple solution to this is to use the Factory pattern. The
 factory creates a new agent instance and then has that agent
 attach to event feeds. But this leads to problem with
 <a href="../dispatcher/EfsDispatcher.html" title="class in org.efs.dispatcher"><code>efs dispatcher</code></a>:
 agent event feed initialization is occurring on the factory
 thread while events arrive on the a dispatcher thread. As
 pointed out in <code>efs-dispatcher</code>, dispatcher guarantees
 an agent is accessed in a virtual single-threaded manner. This
 guarantee may only be kept if agent event feed attachment is
 also done via the dispatcher.
 </p>
 <p>
 This is where
 <a href="EfsActivator.html" title="class in org.efs.activator"><code>EfsActivator</code></a> comes in.
 It is used to trigger agent event initialization using the
 agent's dispatcher. An agent must implement
 <a href="IEfsActivateAgent.html" title="interface in org.efs.activator"><code>IEfsActivatorAgent</code></a>
 (which extends <code>IEfsAgent</code>) to make itself accessible to
 the activator. <code>EfsActivator</code> steps an activate agent
 through three
 <a href="EfsAgentState.html" title="enum class in org.efs.activator"><code>agent states</code></a>:
 </p>
 <ol>
   <li>
     <code>STOPPED</code>: agent is not attached to any event feeds
     and should not expect to receive any events (but may
     receive previously posted events).
   </li>
   <li>
     <code>STAND_BY</code>: agent <em>may</em> be attached to event
     feeds (at its discretion) and may receive events. The idea
     here is not fully initialized but may need to process
     certain events in anticipation of full activation.
   </li>
   <li>
     <code>ACTIVE</code>: agent is fully activated and is
     processing all necessary events.
   </li>
 </ol>
 <p>
 Activator steps an agent through these states by calling
 the following <code>IEfsActiveAgent</code> methods from the agent's
 dispatcher:
 </p>
 <ul>
   <li>
     <a href="IEfsActivateAgent.html#startup()"><code>startup</code></a>:
     takes agent from <code>STOPPED</code> to <code>STAND_BY</code> state
     - if successfully completed. If an exception is thrown,
     then agent remains in initial state. This applies for all
     following method calls.
   </li>
   <li>
     <a href="IEfsActivateAgent.html#activate()"><code>activate</code></a>:
     takes agent from <code>STAND_BY</code> to <code>ACTIVE</code>
     state.
   </li>
   <li>
     <a href="IEfsActivateAgent.html#deactivate()"><code>deactivate</code></a>:
     takes agent from <code>ACITVE</code> to <code>STAND_BY</code>
     state.
   </li>
   <li>
     <a href="IEfsActivateAgent.html#stop()"><code>stop</code></a>:
     takes agent from <code>STAND_BY</code> to <code>STOPPED</code>
     state.
   </li>
 </ul>
 <p>
 <code>EfsActivator</code> is designed to transition multiple agents
 in an application from start-up to fully running and back to
 shutdown. Activator does this using one or more
 <a href="Workflow.html" title="class in org.efs.activator"><code>workflow</code></a>s. Each workflow
 consists of one or more
 <a href="WorkflowStage.html" title="class in org.efs.activator"><code>stage</code></a>s, and each stage
 consists of one or more
 <a href="WorkflowStep.html" title="class in org.efs.activator"><code>step</code></a>s. A workflow step
 takes a specific agent from its current state to an adjacent
 state but gives that agent only such much time to complete the
 transition. If the agent exceeds this time limit, the
 transition is considered failed and the agent remains in the
 initial state.
 </p>
 <p>
 Note: when activator is initialized, all agents named in the
 workflows are considered to be in the <code>STOPPED</code> state.
 </p>
 <p>
 <strong>NOTE</strong>: activate agents must be registered with
 their respective dispatchers <em>before</em> any
 <code>EfsActivate</code> execution methods are called.
 </p>
 <h2 id="example-workflows-heading">Example Workflows</h2>
 <p>
 The following <code>typesafe</code> configuration file defining
 an activator's workflows used for a trading application:
 </p>
 <pre><code>workflows = [
  {
    name = "hot-start"
    stages = [
      {
        // Stage one: move market data agent to stand-by.
        steps = [
          {
            agent = "market-data-agent"
            beginState = STOPPED
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        // Stage two: activate market data agent and put algo
        // agent into stand-by.
        steps = [
          {
            agent = "market-data-agent"
            beginState = STAND_BY
            endState = ACTIVE
            allowedTransitionTime = 100 millis
          },
          {
            agent = "make-money-algo-agent"
            beginState = STOPPED
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        // Stage three: activate money making algo.
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = STAND_BY
            endState = ACTIVE
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  },
  {
    name = "warm-start"
    stages = [
      {
        steps = [
          {
            agent = "market-data-agent"
            beginState = STOPPED
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        steps = [
          {
            agent = "market-data-agent"
            beginState = STAND_BY
            endState = ACTIVE
            allowedTransitionTime = 100 millis
          },
          {
            agent = "make-money-algo-agent"
            beginState = STOPPED
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  },
  // Note: shutdown stages should mirror start up.
  {
    name = "hot-shutdown"
    stages = [
      {
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = ACTIVE
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = STAND_BY
            endState = STOPPED
            allowedTransitionTime = 100 millis
          },
          {
            agent = "market-data-agent"
            beginState = ACTIVE
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        steps = [
          {
            agent = "market-data-agent"
            beginState = STAND_BY
            endState = STOPPED
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  },
  {
    name = "warm-shutdown"
    stages = [
      {
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = STAND_BY
            endState = STOPPED
            allowedTransitionTime = 100 millis
          },
          {
            agent = "market-data-agent"
            beginState = ACTIVE
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      },
      {
        steps = [
          {
            agent = "market-data-agent"
            beginState = STAND_BY
            endState = STOPPED
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  },
  {
    name = "warm-to-hot"
    stages = [
      {
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = STAND_BY
            endState = ACTIVE
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  },
  {
    name = "hot-to-warm"
    stages = [
      {
        steps = [
          {
            agent = "make-money-algo-agent"
            beginState = ACTIVE
            endState = STAND_BY
            allowedTransitionTime = 100 millis
          }
        ]
      }
    ]
  }
]</code></pre>
 <p>
 Workflow "hot-start" brings the application to a fully
 active state where it is processing market data and the algo
 is making money based on that market data. Workflow
 "warm-start" brings market data agent up fully but the algo
 is left in stand-by. These two workflows would be used to
 initialize two separate instances of the application: one in
 a "hot" active state and the other in a "warm" stand-by state.
 </p>
 <p>
 The remaining workflows are used to bring the application down
 (all agents back to a stopped state) or to transition between
 hot and warm.
 </p>
 <h2 id="activator-execution-heading">Activator Execution</h2>
 <p>
 Activator provides different execution granularity levels. In
 all cases the first step is to define the executed workflow
 via
 <a href="EfsActivator.html#initializeWorkflow(java.lang.String)"><code>EfsActivator.initializeWorkflow</code></a>.
 This step must be performed prior to the following workflow
 execution types.
 </p>
 <ul>
   <li>
     <a href="EfsActivator.html#executeWorkflow()"><code>EfsActivator.executeWorkflow()</code></a>:
     activator executes all remaining workflow steps until
     completion or a agent transition failure is detected.
     If this method is called immediately after setting the
     workflow, then the entire workflow is executed. If
     workflow was partially executed, then executes the
     remainder.
   </li>
   <li>
     <a href="EfsActivator.html#executeNextStage()"><code>EfsActivator.executeNextStage()</code></a>:
     activates all remaining workflow steps in current stage
     until stage's completion. Again, if workflow is at the
     stage's first step, then entire stage is executed. If
     stage is partially completed, then executes remainder of
     stage steps.
   </li>
   <li>
     <a href="EfsActivator.html#executeNextStep()"><code>EfsActivator.executeNextStep()</code></a>:
     activates next step and stops.
   </li>
 </ul>
 <p>
 <strong>NOTE:</strong> <code>EfsActivator</code> keeps track of
 each <code>IEfsActivateAgent</code>'s current state according to
 the above execution methods. If all goes well, then workflows
 move agents to the desired state. But in the wild agents don't
 behave as expected. The <code>IEfsActiveAgent</code> method may
 throw a recoverable exception or take unexpectedly long to
 complete. <code>EfsActivator</code> provides two methods to
 get an agent back to its expected workflow state:
 </p>
 <ol>
   <li>
     <a href="EfsActivator.html#execute(java.lang.String,org.efs.activator.EfsAgentState,org.efs.activator.EfsAgentState,java.time.Duration)"><code>EfsActivator.execute(String, EfsAgentState, EfsAgentState, Duration)</code></a>:
     transitions named agent from a begin state to an adjacent
     end state with a given allowed transition time. It is
     expected that this begin state matches what activator
     thinks is the agent state. So if an agent fails a
     transition due to exceeding allowed transition time, then
     that transition may be attempted again with an increased
     transition time.
   </li>
   <li>
     <a href="EfsActivator.html#agentState(java.lang.String,org.efs.activator.EfsAgentState)"><code>EfsActivator.agentState(String, EfsAgentState</code></a>:
     explicitly sets current agent state in activator. If it is
     determined that a failed transition actually succeeded,
     then allows agent state to be correctly set.
   </li>
 </ol>
 <p>
 These methods should be used with care and only after
 determining that external workflow intervention is required.
 As stated above, activator executions terminate immediately
 upon the first failed transition. The best response to this
 failure would be to call
 <code>EfsActivator.executeNextStep()</code> and retry that failed
 step. If that is successful, then continue with executing
 the remainder of the stage or entire workflow.
 </p>
 <h2 id="monitor-efsactivator-heading">Monitor EfsActivator</h2>
 <p>
 As <code>EfsActivator</code> steps through a workflow, it informs
 registered listeners of an agent's transition to a new state.
 An activator listener is registered via
 <a href="EfsActivator.html#registerListener(java.util.function.Consumer,org.efs.dispatcher.IEfsAgent)"><code>EfsActivator.registerListener(Consumer&lt;ActivatorEvent&gt;, IEfsAgent)</code></a>.
 The <code>ActivatorEvent</code> is delivered to listener agent via
 the <code>Consumer&lt;ActivatorEvent&gt;</code> callback. The activator
 listener is de-registered via
 <a href="EfsActivator.html#deregisterListener(java.util.function.Consumer,org.efs.dispatcher.IEfsAgent)"><code>EfsActivator.deregisterListener(Consumer&lt;ActivatorEvent&gt;, IEfsAgent)</code></a>.
 Note: an agent may not register with a different callback
 if already currently registered.
 </p></div>
</section>
</div>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="config/package-summary.html">org.efs.activator.config</a></div>
<div class="col-last even-row-color">
<div class="block">This package provides
 <a href="https://github.com/lightbend/config" target="_blank">typesafe</a>
 configuration bean classes which may be loaded from a file as
 follows:</div>
</div>
<div class="col-first odd-row-color"><a href="event/package-summary.html">org.efs.activator.event</a></div>
<div class="col-last odd-row-color">
<div class="block">This package defines the
 <a href="event/ActivatorEvent.html" title="class in org.efs.activator.event"><code>ActivatorEvent</code></a>
 posted by
 <a href="EfsActivator.html" title="class in org.efs.activator"><code>EfsActivator</code></a> to
 registered <a href="../dispatcher/IEfsAgent.html" title="interface in org.efs.dispatcher"><code>agents</code></a>.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab3" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab3', 2)" class="table-tab">Enum Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel" aria-labelledby="class-summary-tab0">
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="EfsActivator.html" title="class in org.efs.activator">EfsActivator</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><code>EfsActivator</code> is responsible for starting, enabling,
 disabling, and stopping <a href="IEfsActivateAgent.html" title="interface in org.efs.activator"><code>agents</code></a>
 according to a given <a href="Workflow.html" title="class in org.efs.activator"><code>Workflow</code></a>.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="EfsActivator.Builder.html" title="class in org.efs.activator">EfsActivator.Builder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Builder class used to create an activator.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab3"><a href="EfsAgentState.html" title="enum class in org.efs.activator">EfsAgentState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab3">
<div class="block">Lists the possible efs agent states.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="IEfsActivateAgent.html" title="interface in org.efs.activator">IEfsActivateAgent</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Extends <a href="../dispatcher/IEfsAgent.html" title="interface in org.efs.dispatcher"><code>IEfsAgent</code></a> with methods supporting activation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Workflow.html" title="class in org.efs.activator">Workflow</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A workflow contains one or more
 <a href="WorkflowStage.html" title="class in org.efs.activator"><code>workflow stages</code></a> which take
 <a href="IEfsActivateAgent.html" title="interface in org.efs.activator"><code>agent</code></a>(s)
 from a start state to an end state.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Workflow.Builder.html" title="class in org.efs.activator">Workflow.Builder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Provides ability to programmatically define a
 <a href="Workflow.html" title="class in org.efs.activator"><code>Workflow</code></a> instance.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab3"><a href="WorkflowDirection.html" title="enum class in org.efs.activator">WorkflowDirection</a></div>
<div class="col-last even-row-color class-summary class-summary-tab3">
<div class="block">Workflow either advances agents from a lower to a higher
 state or descends agents from a higher to a lower state.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="WorkflowStage.html" title="class in org.efs.activator">WorkflowStage</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A workflow stage contains one or more
 <a href="WorkflowStep.html" title="class in org.efs.activator"><code>steps</code></a> which take agent(s) from a start
 state to end state.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="WorkflowStage.Builder.html" title="class in org.efs.activator">WorkflowStage.Builder</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Provides ability to programmatically define a
 <a href="WorkflowStage.html" title="class in org.efs.activator"><code>WorkflowStage</code></a> instance.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="WorkflowStep.html" title="class in org.efs.activator">WorkflowStep</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A workflow step takes a single <code>IEfsActivateAgent</code> from
 an expected begin state to an adjacent next state.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="WorkflowStep.Builder.html" title="class in org.efs.activator">WorkflowStep.Builder</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Provides ability to programmatically define a
 <a href="WorkflowStep.html" title="class in org.efs.activator"><code>WorkflowStep</code></a> instance.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. Charles W. Rapp<br>All rights reserved</small></p>
</footer>
</main>
</div>
</body>
</html>
